流程


## 数据加载

数据集定义

项目定义了多个数据集类来处理不同类型的数据：

COCO数据集系列 ：

* CoCoDataset ：基础COCO数据集加载
* CoCoDataset_aug ：带增强的COCO数据集

* CoCoDataset_aug_update ：更新版增强COCO数据集
* CoCoDataset_aug_update_withneg ：带负样本的增强COCO数据集

Visual Genome数据集 ：

* VG_Attribution ：Visual Genome属性归因任务数据集
* VG_Relation ：Visual Genome关系预测任务数据集

数据加载流程

1. 数据读取 ：

   - 从JSON文件加载数据标注信息
   - 根据数据类型确定图像根目录
2. 图像加载与处理 ：

   - 打开图像文件并转换为RGB格式
   - 如有需要，根据边界框裁剪图像
   - 应用预处理变换
3. 文本与三元组编码 ：

   - 对句子级文本进行CLIP tokenization
   - 对三元组进行BERT tokenization
   - 生成注意力掩码和类型标识
4. 正负样本生成 ：

   - 为每个样本生成正样本和负样本对
   - 用于对比学习和损失计算

模型维度

输入

输出

方法论：怎么解决问题的，用了什么新方法

clip模型处理结构化表征效果不行，提出两点解决方案：1.提出知识增强编码器2.生成负样本

实验设置：怎么验证的，数据集是什么，评估指标有哪些


## 项目评估指标表

1. 图像-文本检索评估指标

| 指标名称    | 含义                         | 计算方式                                             |
| ----------- | ---------------------------- | ---------------------------------------------------- |
| TextRank1   | 文本到图像检索的Top-1准确率  | 对于每个文本查询，正确图像出现在检索结果第1位的比例  |
| TextRank5   | 文本到图像检索的Top-5准确率  | 对于每个文本查询，正确图像出现在检索结果前5位的比例  |
| TextRank10  | 文本到图像检索的Top-10准确率 | 对于每个文本查询，正确图像出现在检索结果前10位的比例 |
| ImageRank1  | 图像到文本检索的Top-1准确率  | 对于每个图像，正确文本出现在检索结果第1位的比例      |
| ImageRank5  | 图像到文本检索的Top-5准确率  | 对于每个图像，正确文本出现在检索结果前5位的比例      |
| ImageRank10 | 图像到文本检索的Top-10准确率 | 对于每个图像，正确文本出现在检索结果前10位的比例     |

2. Visual Genome关系任务评估指标

| 指标名称          | 含义                     | 计算方式                                                          |
| ----------------- | ------------------------ | ----------------------------------------------------------------- |
| acc_test_relation | 关系分类任务的平均准确率 | 计算所有关系类型准确率的平均值（macro average）                   |
| {relation}-Acc    | 特定关系类型的准确率     | 对于每种关系类型（如"on"、"in"、"under"等），单独计算其分类准确率 |
| Accuracy          | 整体关系分类准确率       | 所有样本中分类正确的比例                                          |

3. Visual Genome属性归因任务评估指标

| 指标名称             | 含义                     | 计算方式                                                      |
| -------------------- | ------------------------ | ------------------------------------------------------------- |
| acc_test_attribution | 属性归因任务的平均准确率 | 计算所有属性类型准确率的平均值（macro average）               |
| {attribute}-Acc      | 特定属性类型的准确率     | 对于每种属性类型（如"颜色_形状"等组合），单独计算其分类准确率 |
| Accuracy             | 整体属性归因准确率       | 所有样本中分类正确的比例                                      |

指标计算的核心逻辑

1. 检索指标 ：通过计算文本嵌入和图像嵌入之间的余弦相似度，然后对相似度进行排序，统计正确匹配的排名位置。
2. 分类指标 ：通过计算图像与正确/错误描述之间的相似度，选择得分最高的描述作为预测，然后计算准确率。
3. 宏平均（Macro Average） ：对所有关系/属性类型的准确率取平均，确保稀有类型也被公平评估。


结果分析：效果如何，和baseline相比提升了多少
